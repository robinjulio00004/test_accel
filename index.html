<!doctype html>
<!--mi CV en Realidad Aumentada-->
<html lang="en-US">
	<head>
	<meta charset="utf-8"/> 
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="apple-mobile-web-app-capable" content="yes">
    	<script src="aframe-v1.7.0.min.js"></script>
    	<script src="aframe-ar.js"></script>
    	<script src="aframe-extras.js"></script>
	<script src="animation-mixer.js"></script>
	<link rel="stylesheet" href="styles.css">
	</head>
<body style="margin : 0px; overflow: hidden;">
	<!-- Valores de salida -->
	<div class="valores">
 	 <div id="out1"></div>
	 <div id="out2"></div>
	 <div id="out3"></div>
	</div>
	<!-- Scene -->
      <a-scene embedded arjs embedded renderer="logarithmicDepthBuffer: true;" xr-mode-ui="enabled: true">
	<a-assets> <!-- Asset management system. -->
	<a-asset-item id="glb_model1" src="casco.gltf"></a-asset-item>
  	</a-assets>
	<!-- Models and primitive objects -->
	<a-box position="-2 0.5 -2" rotation="0 45 0" color="#4CC3D9"></a-box>
      	<a-sphere position="2 0.5 -2" radius="0.5" color="#EF2D5E"></a-sphere>
      	<a-cylinder position="-2 0.5 2" radius="0.5" height="1" color="#FFC65D"></a-cylinder>
      	<a-plane position="0 0 0" rotation="-90 0 0" width="6" height="6" color="#FFFFFF"></a-plane>
	<a-entity gltf-model="#glb_model1" scale="0.5 0.5 0.5" position="2 0.5 2" rotation="0 0 0"></a-entity>	

	<!-- Camera -->
	      	<a-entity id="cameraview" position="0 0 20">
		<a-camera>
  		<a-entity cursor="fuse: true; fuseTimeout: 500"
            	position="0 0 -3"
            	geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
           	material="color: green; shader: flat"></a-entity>
		</a-camera>
		</a-entity>
		</a-entity>
      </a-scene>
</body>
	<!-- Javascript -->
<script>
	let m1=0, m2=0, m3=0, m4=0, m5=0, m6=0, M=0, Ay=0, W=0, flanco=0, pasos=0, contador=0;
	let cam=document.querySelector('#cameraview');
	/*let campost=cam.object3D.position;*/
	/*let campost=cam.object3D.position;*/
	let campost=cam.getAttribute('position');

	window.addEventListener("devicemotion", function() {
	var accely=event.acceleration.y;
		Ay = accely;
		m1 = Ay;
		m2 = m1;
		m3 = m2;
		m4 = m3;
		m5 = m4;
		m6 = m5; 
	M = (m1 / 6) + (m2 / 6) + (m3 / 6) + (m4 / 6) + (m5 / 6) + (m6 / 6);/*promediador*/
	M=M-1.0;/*offset*/
	if (M < -1.3)
        {
	setTimeout(()=>{},250);/*retardo de 250ms*/
            W = 0;
	setTimeout(()=>{},250);/*retardo de 250ms*/
        }
        else if(M > -0.75)
        { 
	setTimeout(()=>{},250);/*retardo de 250ms*/
            W = -1;
	setTimeout(()=>{},250);/*retardo de 250ms*/
        }
        if(flanco!=W)
        {
	setTimeout(()=>{},350);/*retardo de 250ms*/
            contador++;
	setTimeout(()=>{},350);/*retardo de 250ms*/
        }
        flanco = W;
        pasos = parseInt(contador/2);
	document.getElementById("out1").innerHTML=flanco;
	document.getElementById("out2").innerHTML=contador;
	document.getElementById("out3").innerHTML=pasos;
	},true);
	
	/*window.addEventListener('devicemotion', (event)=>{
            var acc = event.acceleration;
            this.el.object3D.position.x += acc.x*9.8;
            this.el.object3D.position.y += acc.y*9.8;
            this.el.object3D.position.z += acc.z*9.8;

        });*/	
</script>
</html>
